<div class="container">
    <h3>Create or choose customer</h3>

    <form novalidate class="form customerForm" name="form"
          data-ng-submit="addNewCustomer()">
        <div class="form-group">

            <label for="organization">Organization name</label>

            <div class="input-group">
                <input class="form-control" type="text" id="organization"
                       data-ng-model="applicant.organizationNameOrObject"
                       data-uib-typeahead="customer as customer.organizationName for customer in customers |
                       filter:$viewValue | limitTo:8" autocomplete="off"/>
                <span class="input-group-btn">
                    <button data-ng-disabled="applicant.organizationNameOrObject.id === undefined"
                            data-ng-click="chooseCustomer()"
                            class="btn btn-default">CHOOSE
                    </button>
                </span>
            </div>
            <div data-ng-show="form.$submitted || form.pName.$touched">
                <div data-ng-show="form.pName.$error.required">Organization name is needed.</div>
            </div>
            <div data-ng-show="applicant.organizationNameOrObject.id !== undefined">
                <small>Existing customer</small>
            </div>
            <div data-ng-show="applicant.organizationNameOrObject.id === undefined">
                <small>New customer</small>
            </div>
        </div>

        <div class="form-group border">
            <label>Application area</label>

            <input data-ng-if="applicant.organizationNameOrObject.id === undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.applicationArea"/>

            <!--organizationNameOrObject is object -->
            <input data-ng-if="applicant.organizationNameOrObject.id !== undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.organizationNameOrObject.applicationArea"/>
        </div>

        <label>CONTACT</label>

        <div class="form-group">
            <label>First name</label>
            <input data-ng-if="applicant.organizationNameOrObject.id === undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control" data-ng-model="applicant.contactFirstName" required
                   name="uName"/>

            <input data-ng-if="applicant.organizationNameOrObject.id !== undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.organizationNameOrObject.contacts[0].firstName" required
                   name="uName"/>

            <div data-ng-show="form.$submitted || form.uName.$touched">
                <div data-ng-show="form.uName.$error.required">Contact
                    first name is needed.
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Last name</label>
            <input data-ng-if="applicant.organizationNameOrObject.id === undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.contactLastName" required
                   name="uName">

            <input data-ng-if="applicant.organizationNameOrObject.id !== undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.organizationNameOrObject.contacts[0].lastName" required
                   name="uName">

            <div data-ng-show="form.$submitted || form.uName.$touched">
                <div data-ng-show="form.uName.$error.required">Contact
                    last name is needed.
                </div>
            </div>
        </div>

        <div class="form-group">
            <label>Email</label>
            <input data-ng-if="applicant.organizationNameOrObject.id === undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="email" class="form-control" required
                   data-ng-model="applicant.email" name="email">

            <input data-ng-if="applicant.organizationNameOrObject.id !== undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="email" class="form-control" required
                   data-ng-model="applicant.organizationNameOrObject.contacts[0].email" name="email">

            <div data-ng-show="form.$submitted || form.email.$touched">
                <span data-ng-show="form.email.$error.required">Email is needed.</span>
                <span data-ng-show="form.email.$error.email">This is not a valid email.</span>
            </div>
        </div>

        <div class="form-group">
            <label>Skype</label>
            <input data-ng-if="applicant.organizationNameOrObject.id === undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.skype" name="uSkype"/>

            <input data-ng-if="applicant.organizationNameOrObject.id !== undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.organizationNameOrObject.contacts[0].skype" name="uSkype"/>
        </div>

        <div class="form-group border">
            <label>Phone</label>

            <input data-ng-if="applicant.organizationNameOrObject.id === undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.phone"/>

            <input data-ng-if="applicant.organizationNameOrObject.id !== undefined"
                   data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                   type="text" class="form-control"
                   data-ng-model="applicant.organizationNameOrObject.contacts[0].phone"/>
        </div>

        <div class="form-group">
            <button
                    data-ng-disabled="applicant.organizationNameOrObject.id !== undefined"
                    data-ng-click="addNewCustomer()" class="btn btn-default">CREATE
            </button>
        </div>

    </form>

</div>
